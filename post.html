<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ब्लॉग पोस्ट</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: Arial, sans-serif; }
        body { background-color: #f4f4f4; color: #333; }
        header { background: linear-gradient(90deg, #2c3e50, #3498db); color: white; text-align: center; padding: 20px; box-shadow: 0 2px 5px rgba(0,0,0,0.2); }
        header h1 { font-size: 2.5em; margin-bottom: 10px; }
        header button { background: #fff; color: #3498db; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin: 5px; }
        header button:hover { background: #eee; }
        #authStatus { font-size: 1em; margin-top: 10px; }
        #postContent { max-width: 800px; margin: 20px auto; padding: 20px; background: white; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        #postContent h2 { font-size: 2em; margin-bottom: 15px; }
        #postContent p { line-height: 1.6; margin-bottom: 15px; }
        #authModal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; padding: 20px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); width: 300px; }
        #authModal input { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 5px; }
        #authModal button { background: #3498db; color: white; padding: 10px; border: none; border-radius: 5px; cursor: pointer; width: 100%; }
        #authModal button:hover { background: #2980b9; }
        #authModal .toggle { text-align: center; margin-top: 10px; cursor: pointer; color: #3498db; }
        footer { background: #333; color: white; text-align: center; padding: 10px; width: 100%; }
        @media (max-width: 600px) { header h1 { font-size: 1.8em; } #postContent h2 { font-size: 1.5em; } }
    </style>
</head>
<body>
    <header>
        <h1>मेरा ब्लॉग</h1>
        <button id="loginBtn">लॉगिन</button>
        <button id="signupBtn">साइनअप</button>
        <button id="logoutBtn" style="display: none;">लॉगआउट</button>
        <p id="authStatus"></p>
    </header>

    <div id="postContent"></div>

    <div id="authModal">
        <h2 id="modalTitle">लॉगिन</h2>
        <input type="text" id="username" placeholder="यूजरनेम">
        <input type="password" id="password" placeholder="पासवर्ड">
        <input type="password" id="confirmPassword" placeholder="कन्फर्म पासवर्ड" style="display: none;">
        <button id="authSubmit">सबमिट</button>
        <p class="toggle" id="toggleAuth">साइनअप पर जाएं</p>
    </div>

    <footer>
        <p>&copy; 2025 मेरा ब्लॉग। सभी अधिकार सुरक्षित।</p>
    </footer>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "तुम्हारा_API_कुंजी",
            authDomain: "तुम्हारा_प्रोजेक्ट_ID.firebaseapp.com",
            projectId: "तुम्हारा_प्रोजेक्ट_ID",
            storageBucket: "तुम्हारा_प्रोजेक्ट_ID.appspot.com",
            messagingSenderId: "तुम्हारा_मैसेजिंग_ID",
            appId: "तुम्हारा_ऐप_ID"
        };
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);

        let posts = [];
        let isSignup = false;
        const fakeDomain = '@myblog.com';
        const urlParams = new URLSearchParams(window.location.search);
        const postId = urlParams.get('id');

        async function fetchPost() {
            try {
                const response = await fetch('posts.json');
                if (!response.ok) throw new Error('JSON फेच करने में समस्या');
                posts = await response.json();
                displayPost();
            } catch (error) {
                console.error('JSON फेच एरर:', error);
                document.getElementById('postContent').innerHTML = '<p>पोस्ट लोड करने में त्रुटि।</p>';
            }
        }

        function displayPost() {
            const post = posts.find(p => p.id == postId);
            if (post && auth.currentUser) {
                document.getElementById('postContent').innerHTML = `
                    <h2>${post.title}</h2>
                    <p>${post.content}</p>
                    <p><i>तारीख: ${post.date}</i></p>
                    <a href="index.html">वापस</a>
                `;
                // डायनामिक SEO मेटा टैग्स
                document.title = post.title;
                document.querySelector('meta[name="description"]').setAttribute('content', post.excerpt);
            } else {
                showAuthModal(false);
                document.getElementById('postContent').innerHTML = '<p>पोस्ट देखने के लिए लॉगिन करें।</p>';
            }
        }

        function showAuthModal(signupMode) {
            isSignup = signupMode;
            document.getElementById('modalTitle').innerText = isSignup ? 'साइनअप' : 'लॉगिन';
            document.getElementById('confirmPassword').style.display = isSignup ? 'block' : 'none';
            document.getElementById('toggleAuth').innerText = isSignup ? 'लॉगिन पर जाएं' : 'साइनअप पर जाएं';
            document.getElementById('authModal').style.display = 'block';
        }

        document.getElementById('authSubmit').addEventListener('click', async () => {
            let username = document.getElementById('username').value;
            let password = document.getElementById('password').value;
            let confirmPassword = document.getElementById('confirmPassword').value;
            let email = username + fakeDomain;

            try {
                if (isSignup) {
                    if (password !== confirmPassword) {
                        alert('पासवर्ड मैच नहीं कर रहे!');
                        return;
                    }
                    await createUserWithEmailAndPassword(auth, email, password);
                    alert('साइनअप सफल!');
                    document.getElementById('authModal').style.display = 'none';
                    displayPost();
                } else {
                    await signInWithEmailAndPassword(auth, email, password);
                    alert('लॉगिन सफल!');
                    document.getElementById('authModal').style.display = 'none';
                    displayPost();
                }
            } catch (error) {
                alert('एरर: ' + error.message);
            }
        });

        document.getElementById('toggleAuth').addEventListener('click', () => {
            showAuthModal(!isSignup);
        });

        document.getElementById('loginBtn').addEventListener('click', () => showAuthModal(false));
        document.getElementById('signupBtn').addEventListener('click', () => showAuthModal(true));
        document.getElementById('logoutBtn').addEventListener('click', async () => {
            await signOut(auth);
            alert('लॉगआउट सफल!');
            window.location.href = 'index.html';
        });

        onAuthStateChanged(auth, user => {
            if (user) {
                document.getElementById('authStatus').innerText = `स्वागत है, ${user.email.split('@')[0]}!`;
                document.getElementById('loginBtn').style.display = 'none';
                document.getElementById('signupBtn').style.display = 'none';
                document.getElementById('logoutBtn').style.display = 'inline-block';
                displayPost();
            } else {
                document.getElementById('authStatus').innerText = 'आप लॉग्ड इन नहीं हैं।';
                document.getElementById('loginBtn').style.display = 'inline-block';
                document.getElementById('signupBtn').style.display = 'inline-block';
                document.getElementById('logoutBtn').style.display = 'none';
                document.getElementById('postContent').innerHTML = '<p>पोस्ट देखने के लिए लॉगिन करें।</p>';
            }
        });

        fetchPost();
    </script>
</body>
</html>