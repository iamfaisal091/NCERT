<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>‡§Æ‡•á‡§∞‡§æ ‡§¨‡•ç‡§≤‡•â‡§ó</title>
  <!-- jsPDF CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    /* ‡§∞‡§ø‡§∏‡•á‡§ü ‡§î‡§∞ ‡§¨‡•á‡§∏‡§ø‡§ï ‡§∏‡•ç‡§ü‡§æ‡§á‡§≤ */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Arial, sans-serif;
    }
    body {
      background-color: #e0e7ff;
      color: #1f2937;
      line-height: 1.6;
      overflow-x: hidden;
    }
    a {
      text-decoration: none;
      color: inherit;
    }

    /* ‡§π‡•á‡§°‡§∞ */
    header {
      background: linear-gradient(90deg, #4f46e5, #7c3aed);
      color: white;
      padding: 15px 20px;
      position: fixed;
      width: 100%;
      top: 0;
      left: 0;
      z-index: 1000;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }
    .logo {
      font-size: 1.8rem;
      font-weight: 700;
      letter-spacing: 1px;
    }
    .hamburger {
      display: none;
      font-size: 2rem;
      cursor: pointer;
      transition: transform 0.3s;
    }
    .hamburger:hover {
      transform: rotate(90deg);
    }

    /* ‡§∏‡§æ‡§á‡§°‡§¨‡§æ‡§∞ */
    .sidebar {
      background: #111827;
      color: white;
      width: 80px;
      height: 100vh;
      position: fixed;
      top: 0;
      left: 0;
      padding-top: 80px;
      transition: width 0.3s ease;
      z-index: 999;
      overflow: hidden;
      box-shadow: 2px 0 5px rgba(0, 0, 0, 0.1);
    }
    .sidebar:hover {
      width: 220px;
    }
    .sidebar ul {
      list-style: none;
      padding: 20px 0;
    }
    .sidebar li {
      margin-bottom: 15px;
    }
    .sidebar a {
      display: flex;
      align-items: center;
      padding: 12px 15px;
      font-size: 1.1rem;
      color: white;
      transition: background 0.3s, transform 0.2s;
    }
    .sidebar a:hover {
      background: #4f46e5;
      transform: translateX(5px);
    }
    .sidebar .icon {
      font-size: 1.4rem;
      width: 40px;
      text-align: center;
    }
    .sidebar .text {
      opacity: 0;
      transition: opacity 0.3s;
    }
    .sidebar:hover .text {
      opacity: 1;
    }

    /* ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§ï‡§Ç‡§ü‡•á‡§Ç‡§ü */
    .main-content {
      margin-left: 80px;
      padding: 90px 20px 80px;
      min-height: 100vh;
      transition: margin-left 0.3s ease;
    }
    .container {
      max-width: 1200px;
      margin: 0 auto;
    }
    h1 {
      text-align: center;
      margin-bottom: 30px;
      color: #1f2937;
      font-size: 2.5rem;
      font-weight: 700;
    }
    .blog-list {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 25px;
      padding-bottom: 30px;
    }
    .blog-card {
      background: white;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.1);
      transition: transform 0.3s, box-shadow 0.3s;
      display: flex;
      flex-direction: column;
      height: 100%;
      animation: fadeIn 0.5s ease-in;
      position: relative;
    }
    .blog-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
    }
    .blog-image {
      width: 100%;
      aspect-ratio: 16 / 9;
      object-fit: cover;
      display: block;
      border-bottom: 3px solid #4f46e5;
      transition: transform 0.3s;
    }
    .blog-card:hover .blog-image {
      transform: scale(1.05);
    }
    .blog-content {
      padding: 20px;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
    }
    .blog-title {
      font-size: 1.6rem;
      color: #1f2937;
      margin-bottom: 12px;
      font-weight: 600;
    }
    .blog-description {
      font-size: 1rem;
      color: #6b7280;
      display: -webkit-box;
      -webkit-line-clamp: 3;
      -webkit-box-orient: vertical;
      overflow: hidden;
      text-overflow: ellipsis;
      flex-grow: 1;
    }

    /* ‡§§‡•Ä‡§® ‡§¨‡§ø‡§Ç‡§¶‡•Å ‡§Æ‡•á‡§®‡•Ç */
    .menu-btn {
      position: absolute;
      top: 10px;
      right: 10px;
      background: #f9fafb;
      border: none;
      border-radius: 50%;
      width: 32px;
      height: 32px;
      font-size: 1.2rem;
      cursor: pointer;
      color: #1f2937;
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      z-index: 11;
      transition: background 0.3s;
    }
    .menu-btn:hover {
      background: #e0e7ff;
    }
    .menu {
      display: none;
      position: absolute;
      top: 45px;
      right: 10px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
      z-index: 10;
      min-width: 120px;
    }
    .menu.active {
      display: block;
    }
    .menu button {
      display: block;
      width: 100%;
      padding: 10px 15px;
      background: none;
      border: none;
      text-align: left;
      font-size: 0.9rem;
      color: #1f2937;
      cursor: pointer;
      transition: background 0.3s;
    }
    .menu button:hover {
      background: #f3f3f3;
    }

    /* ‡§≤‡•ã‡§° ‡§Æ‡•ã‡§∞ ‡§¨‡§ü‡§® ‡§î‡§∞ ‡§∏‡•ç‡§™‡§ø‡§®‡§∞ */
    .load-more {
      text-align: center;
      margin: 30px 0;
    }
    .load-more-btn {
      background: #4f46e5;
      color: white;
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 1.1rem;
      cursor: pointer;
      transition: background 0.3s, transform 0.2s;
    }
    .load-more-btn:hover {
      background: #7c3aed;
      transform: scale(1.05);
    }
    .load-more-btn:disabled {
      background: #6b7280;
      cursor: not-allowed;
    }
    .spinner {
      display: none;
      border: 4px solid #f3f3f3;
      border-top: 4px solid #4f46e5;
      border-radius: 50%;
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 20px auto;
    }
    .spinner.active {
      display: block;
    }

    /* ‡§´‡•Å‡§ü‡§∞ */
    footer {
      background: linear-gradient(90deg, #4f46e5, #7c3aed);
      color: white;
      text-align: center;
      padding: 15px;
      position: fixed;
      bottom: 0;
      width: 100%;
      left: 0;
      box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.2);
      font-size: 0.9rem;
    }

    /* ‡§è‡§®‡§ø‡§Æ‡•á‡§∂‡§® */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    /* ‡§∞‡•á‡§∏‡•ç‡§™‡•â‡§®‡•ç‡§∏‡§ø‡§µ ‡§°‡§ø‡§ú‡§º‡§æ‡§á‡§® */
    @media (max-width: 768px) {
      .hamburger {
        display: block;
      }
      .sidebar {
        width: 250px;
        transform: translateX(-100%);
      }
      .sidebar.active {
        transform: translateX(0);
      }
      .sidebar:hover {
        width: 250px;
      }
      .sidebar .text {
        opacity: 1;
      }
      .main-content {
        margin-left: 0;
        padding-top: 70px;
        padding-bottom: 80px;
      }
      header {
        padding: 10px 15px;
      }
      .logo {
        font-size: 1.4rem;
      }
      .blog-list {
        grid-template-columns: 1fr;
      }
      .blog-card {
        max-width: 100%;
      }
    }
  </style>
</head>
<body>
  <!-- ‡§π‡•á‡§°‡§∞ -->
  <header>
    <div class="logo">‡§Æ‡•á‡§∞‡§æ ‡§¨‡•ç‡§≤‡•â‡§ó</div>
    <div class="hamburger" id="hamburger">&#9776;</div>
  </header>

  <!-- ‡§∏‡§æ‡§á‡§°‡§¨‡§æ‡§∞ -->
  <nav class="sidebar" id="sidebar">
    <ul>
      <li><a href="index.html"><span class="icon">üè†</span><span class="text">‡§π‡•ã‡§Æ</span></a></li>
      <li><a href="#"><span class="icon">‚ÑπÔ∏è</span><span class="text">‡§Ö‡§¨‡§æ‡§â‡§ü</span></a></li>
      <li><a href="#"><span class="icon">üìû</span><span class="text">‡§ï‡•â‡§®‡•ç‡§ü‡•à‡§ï‡•ç‡§ü</span></a></li>
    </ul>
  </nav>

  <!-- ‡§Æ‡•Å‡§ñ‡•ç‡§Ø ‡§ï‡§Ç‡§ü‡•á‡§Ç‡§ü -->
  <main class="main-content">
    <div class="container">
      <h1>‡§Æ‡•á‡§∞‡•á ‡§¨‡•ç‡§≤‡•â‡§ó</h1>
      <div class="blog-list" id="blogList"></div>
      <div class="load-more">
        <div class="spinner" id="spinner"></div>
        <button class="load-more-btn" id="loadMoreBtn">‡§≤‡•ã‡§° ‡§Æ‡•ã‡§∞</button>
      </div>
    </div>
  </main>

  <!-- ‡§´‡•Å‡§ü‡§∞ -->
  <footer>
    &copy; 2025 ‡§Æ‡•á‡§∞‡§æ ‡§¨‡•ç‡§≤‡•â‡§ó‡•§ ‡§∏‡§≠‡•Ä ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§‡•§
  </footer>

  <script>
    // ‡§π‡•à‡§Æ‡§¨‡§∞‡•ç‡§ó‡§∞ ‡§Æ‡•á‡§®‡•Ç ‡§ü‡•â‡§ó‡§≤
    const hamburger = document.getElementById('hamburger');
    const sidebar = document.getElementById('sidebar');
    hamburger.addEventListener('click', () => {
      sidebar.classList.toggle('active');
    });

    // ‡§¨‡•ç‡§≤‡•â‡§ó ‡§≤‡•ã‡§°‡§ø‡§Ç‡§ó ‡§≤‡•â‡§ú‡§ø‡§ï
    const blogList = document.getElementById('blogList');
    const loadMoreBtn = document.getElementById('loadMoreBtn');
    const spinner = document.getElementById('spinner');
    let allBlogs = [];
    let displayedBlogs = [];

    // ‡§∞‡•à‡§Ç‡§°‡§Æ ‡§¨‡•ç‡§≤‡•â‡§ó‡•ç‡§∏ ‡§ö‡•Å‡§®‡§®‡•á ‡§ï‡•Ä ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
    function getRandomBlogs(array, count) {
      const shuffled = [...array].sort(() => 0.5 - Math.random());
      return shuffled.slice(0, count);
    }

    // ‡§¨‡•ç‡§≤‡•â‡§ó ‡§ï‡§æ‡§∞‡•ç‡§° ‡§∞‡•á‡§Ç‡§°‡§∞ ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
    function renderBlogs(blogs) {
      blogs.forEach(blog => {
        const blogCard = document.createElement('div');
        blogCard.className = 'blog-card';
        blogCard.innerHTML = `
          <a href="blog.html?id=${blog.id}">
            <img src="${blog.image}" alt="${blog.title}" class="blog-image">
          </a>
          <div class="blog-content">
            <h2 class="blog-title">${blog.title}</h2>
            <p class="blog-description">${blog.description}</p>
            <button class="menu-btn" onclick="toggleMenu(${blog.id})">‚ãÆ</button>
            <div class="menu" id="menu-${blog.id}">
              <button onclick="downloadBlogAsPDF(${blog.id})">‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç</button>
              <button onclick="shareBlog(${blog.id})">‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡•á‡§Ç</button>
            </div>
          </div>
        `;
        blogList.appendChild(blogCard);
      });
    }

    // ‡§Æ‡•á‡§®‡•Ç ‡§ü‡•â‡§ó‡§≤
    function toggleMenu(blogId) {
      const menu = document.getElementById(`menu-${blogId}`);
      const isActive = menu.classList.contains('active');
      document.querySelectorAll('.menu').forEach(m => m.classList.remove('active'));
      if (!isActive) {
        menu.classList.add('active');
      }
    }

    // ‡§¨‡•ç‡§≤‡•â‡§ó ‡§ï‡•ã PDF ‡§ï‡•á ‡§∞‡•Ç‡§™ ‡§Æ‡•á‡§Ç ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
    function downloadBlogAsPDF(blogId) {
      const blog = allBlogs.find(b => b.id == blogId);
      if (!blog) return;

      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      doc.setFont('Helvetica', 'normal');
      doc.setFontSize(18);
      doc.text(20, 20, blog.title);
      doc.setFontSize(12);
      doc.text(20, 40, blog.description);
      // ‡§ï‡§Ç‡§ü‡•á‡§Ç‡§ü ‡§ï‡•ã ‡§≤‡§æ‡§á‡§®-‡§¨‡§æ‡§Ø-‡§≤‡§æ‡§á‡§® ‡§™‡•ç‡§∞‡•ã‡§∏‡•á‡§∏ ‡§ï‡§∞‡•á‡§Ç ‡§§‡§æ‡§ï‡§ø ‡§™‡•á‡§ú ‡§¨‡•ç‡§∞‡•á‡§ï ‡§π‡•ã ‡§∏‡§ï‡•á
      const contentLines = doc.splitTextToSize(blog.content, 170); // 170mm ‡§ö‡•å‡§°‡§º‡§æ‡§à
      doc.text(20, 60, contentLines);
      doc.save(`${blog.title}.pdf`);
    }

    // ‡§¨‡•ç‡§≤‡•â‡§ó ‡§∂‡•á‡§Ø‡§∞ ‡§ï‡§∞‡§®‡•á ‡§ï‡•Ä ‡§´‡§Ç‡§ï‡•ç‡§∂‡§®
    function shareBlog(blogId) {
      const blog = allBlogs.find(b => b.id == blogId);
      if (!blog) return;

      if (navigator.share) {
        navigator.share({
          title: blog.title,
          text: blog.description,
          url: `blog.html?id=${blog.id}`
        }).catch(error => console.error('Share failed:', error));
      } else {
        const url = window.location.origin + `/blog.html?id=${blog.id}`;
        navigator.clipboard.writeText(url).then(() => {
          alert('‡§≤‡§ø‡§Ç‡§ï ‡§ï‡•â‡§™‡•Ä ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ: ' + url);
        });
      }
    }

    // JSON ‡§°‡•á‡§ü‡§æ ‡§´‡•á‡§ö ‡§ï‡§∞‡§®‡§æ
    fetch('data.json')
      .then(response => response.json())
      .then(data => {
        allBlogs = data;
        displayedBlogs = getRandomBlogs(allBlogs, 10);
        renderBlogs(displayedBlogs);

        if (allBlogs.length > 10) {
          loadMoreBtn.style.display = 'block';
        } else {
          loadMoreBtn.style.display = 'none';
        }
      })
      .catch(error => console.error('Error fetching data:', error));

    // ‡§≤‡•ã‡§° ‡§Æ‡•ã‡§∞ ‡§¨‡§ü‡§® ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï
    loadMoreBtn.addEventListener('click', () => {
      loadMoreBtn.disabled = true;
      spinner.classList.add('active');

      setTimeout(() => {
        const remainingBlogs = allBlogs.filter(blog => !displayedBlogs.includes(blog));
        const newBlogs = getRandomBlogs(remainingBlogs, Math.min(5, remainingBlogs.length));
        displayedBlogs = [...displayedBlogs, ...newBlogs];
        renderBlogs(newBlogs);

        if (displayedBlogs.length >= allBlogs.length) {
          loadMoreBtn.style.display = 'none';
        }

        loadMoreBtn.disabled = false;
        spinner.classList.remove('active');
      }, 1000);
    });

    // ‡§Æ‡•á‡§®‡•Ç ‡§¨‡§æ‡§π‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡§®‡•á ‡§™‡§∞ ‡§¨‡§Ç‡§¶ ‡§ï‡§∞‡•á‡§Ç
    document.addEventListener('click', (e) => {
      if (!e.target.closest('.menu-btn') && !e.target.closest('.menu')) {
        document.querySelectorAll('.menu').forEach(m => m.classList.remove('active'));
      }
    });
  </script>
</body>
  </html>
